var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function s(){return Object.create(null)}function c(e){e.forEach(n)}function r(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function g(){return v(" ")}function f(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function d(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t,n){e.classList[n?"add":"remove"](t)}let p;function $(e){p=e}function _(e){(function(){if(!p)throw new Error("Function called outside component initialization");return p})().$$.on_mount.push(e)}function b(){const e=p;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const c=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach(t=>{t.call(e,c)})}}}const k=[],y=Promise.resolve();let T=!1;const N=[],L=[],x=[];function w(e){L.push(e)}function M(){const e=new Set;do{for(;k.length;){const e=k.shift();$(e),j(e.$$)}for(;N.length;)N.shift()();for(;L.length;){const t=L.pop();e.has(t)||(t(),e.add(t))}}while(k.length);for(;x.length;)x.pop()();T=!1}function j(e){e.fragment&&(e.update(e.dirty),c(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(w))}let z;function E(){z={remaining:0,callbacks:[]}}function R(){z.remaining||c(z.callbacks)}function U(e){z.callbacks.push(e)}function C(e,n){const s=n.token={};function c(e,c,r,a){if(n.token!==s)return;n.resolved=r&&{[r]:a};const i=t(t({},n.ctx),n.resolved),o=e&&(n.current=e)(i);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==c&&e&&(E(),U(()=>{e.d(1),n.blocks[t]=null}),e.o(1),R())}):n.block.d(1),o.c(),o.i&&o.i(1),o.m(n.mount(),n.anchor),M()),n.block=o,n.blocks&&(n.blocks[c]=o)}if((r=e)&&"function"==typeof r.then){if(e.then(e=>{c(n.then,1,n.value,e)},e=>{c(n.catch,2,n.error,e)}),n.current!==n.pending)return c(n.pending,0),!0}else{if(n.current!==n.then)return c(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var r}function S(e,t){e.d(1),t.delete(e.key)}function B(e,t){U(()=>{S(e,t)}),e.o(1)}function O(e,t,n,s,c,r,a,i,o,l,u,v){let g=e.length,f=r.length,d=g;const h={};for(;d--;)h[e[d].key]=d;const m=[],p=new Map,$=new Map;for(d=f;d--;){const e=v(c,r,d),i=n(e);let o=a.get(i);o?s&&o.p(t,e):(o=l(i,e)).c(),p.set(i,m[d]=o),i in h&&$.set(i,Math.abs(d-h[i]))}const _=new Set,b=new Set;function k(e){e.i&&e.i(1),e.m(i,u),a.set(e.key,e),u=e.first,f--}for(;g&&f;){const t=m[f-1],n=e[g-1],s=t.key,c=n.key;t===n?(u=t.first,g--,f--):p.has(c)?!a.has(s)||_.has(s)?k(t):b.has(c)?g--:$.get(s)>$.get(c)?(b.add(s),k(t)):(_.add(c),g--):(o(n,a),g--)}for(;g--;){const t=e[g];p.has(t.key)||o(t,a)}for(;f;)k(m[f-1]);return m}function A(e,t,s){const{fragment:a,on_mount:i,on_destroy:o,after_render:l}=e.$$;a.m(t,s),w(()=>{const t=i.map(n).filter(r);o?o.push(...t):c(t),e.$$.on_mount=[]}),l.forEach(w)}function q(e,t){e.$$.dirty||(k.push(e),T||(T=!0,y.then(M)),e.$$.dirty=s()),e.$$.dirty[t]=!0}function P(t,n,r,a,i,o){const l=p;$(t);const u=n.props||{},v=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:s(),dirty:null};let g=!1;v.ctx=r?r(t,u,(e,n)=>{v.ctx&&i(v.ctx[e],v.ctx[e]=n)&&(v.bound[e]&&v.bound[e](n),g&&q(t,e))}):u,v.update(),g=!0,c(v.before_render),v.fragment=a(v.ctx),n.target&&(n.hydrate?v.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):v.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),A(t,n.target,n.anchor),M()),$(l)}class F{$destroy(){var t,n;n=!0,(t=this).$$&&(c(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function D(e,t,n){const s=Object.create(e);return s.tag=t[n],s}function G(e){var t,n,s,r,a;return{c(){t=u("label"),n=u("input"),s=g(),(r=u("span")).textContent="Все",e.$$binding_groups[0].push(n),d(n,"type","radio"),n.className="tag__radio svelte-22gzn8",n.__value="all",n.value=n.__value,r.className="tag__name",t.className="tag tag_name_all svelte-22gzn8",m(t,"active","all"===e.activeTag),a=[f(n,"change",e.input_change_handler),f(n,"change",e.handleChange)]},m(c,a){o(c,t,a),i(t,n),n.checked=n.__value===e.activeTag,i(t,s),i(t,r)},p(e,s){e.activeTag&&(n.checked=n.__value===s.activeTag),e.activeTag&&m(t,"active","all"===s.activeTag)},d(s){s&&l(t),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(n),1),c(a)}}}function H(e){var t;return{c(){(t=u("div")).textContent="Loading Tags...\n    ",t.className="tags__loading svelte-22gzn8"},m(e,n){o(e,t,n)},d(e){e&&l(t)}}}function I(e,t){var n,s,r,a,p,$,_,b,k=t.tag.label;return{key:e,first:null,c(){n=u("label"),s=u("input"),a=g(),p=u("span"),$=v(k),_=g(),t.$$binding_groups[0].push(s),d(s,"type","radio"),s.className="tag__radio svelte-22gzn8",s.__value=r=t.tag.value,s.value=s.__value,p.className="tag__name",n.className="tag svelte-22gzn8",m(n,"active",t.tag.value===t.activeTag),b=[f(s,"change",t.input_change_handler_1),f(s,"change",t.handleChange)],this.first=n},m(e,c){o(e,n,c),i(n,s),s.checked=s.__value===t.activeTag,i(n,a),i(n,p),i(p,$),i(n,_)},p(e,t){e.activeTag&&(s.checked=s.__value===t.activeTag),e.tags&&r!==(r=t.tag.value)&&(s.__value=r),s.value=s.__value,e.tags&&k!==(k=t.tag.label)&&h($,k),(e.tags||e.activeTag)&&m(n,"active",t.tag.value===t.activeTag)},d(e){e&&l(n),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(s),1),c(b)}}}function J(t){var n,s,c=[],r=new Map,a=t.tags.length>0&&G(t),v=t.tags;const f=e=>e.tag.value;for(var d=0;d<v.length;d+=1){let e=D(t,v,d),n=f(e);r.set(n,c[d]=I(n,e))}var h=null;return v.length||(h=H()).c(),{c(){for(n=u("div"),a&&a.c(),s=g(),d=0;d<c.length;d+=1)c[d].c();n.className="tags svelte-22gzn8"},m(e,t){for(o(e,n,t),a&&a.m(n,null),i(n,s),d=0;d<c.length;d+=1)c[d].m(n,null);h&&h.m(n,null)},p(e,t){t.tags.length>0?a?a.p(e,t):((a=G(t)).c(),a.m(n,s)):a&&(a.d(1),a=null);const i=t.tags;c=O(c,e,f,1,t,i,r,n,S,I,null,D),i.length?h&&(h.d(1),h=null):h||((h=H()).c(),h.m(n,null))},i:e,o:e,d(e){for(e&&l(n),a&&a.d(),d=0;d<c.length;d+=1)c[d].d();h&&h.d()}}}function K(e,t,n){let{tags:s=[]}=t,c="all";const r=b();return e.$set=e=>{"tags"in e&&n("tags",s=e.tags)},{tags:s,activeTag:c,handleChange:function(){r("change",{value:s.reduce((e,t)=>(e[t.value]=t.value===c,e),{})})},input_change_handler:function(){c=this.__value,n("activeTag",c)},input_change_handler_1:function(){c=this.__value,n("activeTag",c)},$$binding_groups:[[]]}}class Q extends F{constructor(e){super(),P(this,e,K,J,a,["tags"])}}function V(t){var n;return{c(){(n=u("span")).className="icon__empty svelte-njvbcc"},m(e,t){o(e,n,t)},p:e,d(e){e&&l(n)}}}function W(e){var t;return{c(){(t=u("img")).className="icon__image svelte-njvbcc",t.src=e.url,t.alt=""},m(e,n){o(e,t,n)},p(e,n){e.url&&(t.src=n.url)},d(e){e&&l(t)}}}function X(t){var n;return{c(){(n=u("span")).className="icon__loading svelte-njvbcc"},m(e,t){o(e,n,t)},p:e,d(e){e&&l(n)}}}function Y(n){var s,c;let r={ctx:n,current:null,pending:X,then:W,catch:V,value:"null",error:"null"};return C(c=n.promise,r),{c(){s=u("div"),r.block.c(),s.className="icon svelte-njvbcc"},m(e,t){o(e,s,t),r.block.m(s,r.anchor=null),r.mount=()=>s,r.anchor=null},p(e,s){n=s,r.ctx=n,c!==(c=n.promise)&&C(c,r)||r.block.p(e,t(t({},n),r.resolved))},i:e,o:e,d(e){e&&l(s),r.block.d(),r=null}}}function Z(e,t,n){let{className:s="",url:c}=t,r=(a=c,new Promise((e,t)=>{null!==a?fetch(a).then(n=>{n.ok?e():t()}).catch(()=>t()):t()}));var a;return e.$set=e=>{"className"in e&&n("className",s=e.className),"url"in e&&n("url",c=e.url)},{className:s,url:c,promise:r}}class ee extends F{constructor(e){super(),P(this,e,Z,Y,a,["className","url"])}}function te(e,t,n){const s=Object.create(e);return s.service=t[n],s}function ne(e){var t;return{c(){(t=u("div")).textContent="Loading Services...\n    ",t.className="services__loading svelte-1rdzvnt"},m(e,n){o(e,t,n)},d(e){e&&l(t)}}}function se(e,t){var n,s,c,r,a,f,d,m,p,$,_,b,k,y,T,N,L=t.service.name,x=t.service.desc,w=new ee({props:{class:"service__icon",url:t.service.icon}});return{key:e,first:null,c(){n=u("div"),s=u("a"),c=u("figure"),w.$$.fragment.c(),r=g(),a=u("h2"),f=v(L),d=g(),m=u("div"),p=v(x),_=g(),b=u("a"),k=v("Исходный код"),T=g(),c.className="service__icon-placeholder svelte-1rdzvnt",a.className="service__name svelte-1rdzvnt",m.className="service__description svelte-1rdzvnt",s.className="service__link svelte-1rdzvnt",s.href=$=t.service.href,b.className="service__source-link svelte-1rdzvnt",b.href=y=t.service.source,n.className="service svelte-1rdzvnt",this.first=n},m(e,t){o(e,n,t),i(n,s),i(s,c),A(w,c,null),i(s,r),i(s,a),i(a,f),i(s,d),i(s,m),i(m,p),i(n,_),i(n,b),i(b,k),i(n,T),N=!0},p(e,t){var n={};(e.filterServices||e.services)&&(n.url=t.service.icon),w.$set(n),N&&!e.services||L===(L=t.service.name)||h(f,L),N&&!e.services||x===(x=t.service.desc)||h(p,x),N&&!e.services||$===($=t.service.href)||(s.href=$),N&&!e.services||y===(y=t.service.source)||(b.href=y)},i(e){N||(w.$$.fragment.i(e),N=!0)},o(e){w.$$.fragment.o(e),N=!1},d(e){e&&l(n),w.$destroy()}}}function ce(e){var t,n,s=[],c=new Map,r=e.filterServices(e.services);const a=e=>e.service.id;for(var i=0;i<r.length;i+=1){let t=te(e,r,i),n=a(t);c.set(n,s[i]=se(n,t))}var v=null;return r.length||(v=ne()).c(),{c(){for(t=u("div"),i=0;i<s.length;i+=1)s[i].c();t.className="services svelte-1rdzvnt"},m(e,c){for(o(e,t,c),i=0;i<s.length;i+=1)s[i].m(t,null);v&&v.m(t,null),n=!0},p(e,n){const r=n.filterServices(n.services);E(),s=O(s,e,a,1,n,r,c,t,B,se,null,te),R(),r.length?v&&(v.d(1),v=null):v||((v=ne()).c(),v.m(t,null))},i(e){if(!n){for(var t=0;t<r.length;t+=1)s[t].i();n=!0}},o(e){for(i=0;i<s.length;i+=1)s[i].o();n=!1},d(e){for(e&&l(t),i=0;i<s.length;i+=1)s[i].d();v&&v.d()}}}function re(e){return!e}function ae(e,t,n){let{activeTagsMap:s,services:c=[]}=t;function r(e){return e.tags.some(e=>!0===s[e])}return e.$set=e=>{"activeTagsMap"in e&&n("activeTagsMap",s=e.activeTagsMap),"services"in e&&n("services",c=e.services)},{activeTagsMap:s,services:c,filterServices:function(e){return Object.values(s).every(re)?e:e.filter(r)}}}class ie extends F{constructor(e){super(),P(this,e,ae,ce,a,["activeTagsMap","services"])}}function oe(e){return e.map(e=>{const t=e.href.replace(/github\.io/,"com");return{...e,href:t,icon:e.icon?`${t}${e.icon}`:null}})}function le(e){return!0!==e.disabled}function ue(e){return e.filter(le)}function ve(e){return Object.entries(e).reduce((e,[t,n])=>(e.push({label:n,value:t}),e),[])}function ge(e){var t,n,s,c=new Q({props:{tags:e.tags}});c.$on("change",e.onChangeActiveTags);var r=new ie({props:{services:e.services,activeTagsMap:e.activeTagsMap}});return{c(){t=u("section"),c.$$.fragment.c(),n=g(),r.$$.fragment.c(),t.className="services-container"},m(e,a){o(e,t,a),A(c,t,null),i(t,n),A(r,t,null),s=!0},p(e,t){var n={};e.tags&&(n.tags=t.tags),c.$set(n);var s={};e.services&&(s.services=t.services),e.activeTagsMap&&(s.activeTagsMap=t.activeTagsMap),r.$set(s)},i(e){s||(c.$$.fragment.i(e),r.$$.fragment.i(e),s=!0)},o(e){c.$$.fragment.o(e),r.$$.fragment.o(e),s=!1},d(e){e&&l(t),c.$destroy(),r.$destroy()}}}function fe(e,t,n){let{servicesURL:s,tagsURL:c,servicesBlackList:r}=t,a=[],i=[];_(async()=>{const e=await function(e){return fetch(e).then(e=>e.json()).then(oe).then(ue)}(s);n("services",a=e.filter(e=>!r.includes(e.id)));const t=await function(e){return fetch(e).then(e=>e.json()).then(ve)}(c),o=function(e){const t=new Set;return e.forEach(e=>{e.tags.forEach(e=>{t.add(e)})}),t}(a);n("tags",i=t.filter(e=>o.has(e.value)))});let o={};return e.$set=e=>{"servicesURL"in e&&n("servicesURL",s=e.servicesURL),"tagsURL"in e&&n("tagsURL",c=e.tagsURL),"servicesBlackList"in e&&n("servicesBlackList",r=e.servicesBlackList)},{servicesURL:s,tagsURL:c,servicesBlackList:r,services:a,tags:i,activeTagsMap:o,onChangeActiveTags:function({detail:{value:e}}){n("activeTagsMap",o=e)}}}return new class extends F{constructor(e){super(),P(this,e,fe,ge,a,["servicesURL","tagsURL","servicesBlackList"])}}({target:document.querySelector("#services-app-container"),props:{servicesURL:"https://vovanr.com/services-json/dist/services.json",tagsURL:"https://vovanr.com/services-json/src/tags.json",servicesBlackList:["notes"]}})}();
//# sourceMappingURL=bundle.js.map

var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function s(){return Object.create(null)}function c(e){e.forEach(n)}function a(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function o(e,t,n){e.insertBefore(t,n||null)}function l(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function f(){return v(" ")}function g(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function d(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function m(e,t,n){e.classList[n?"add":"remove"](t)}let p;function $(e){p=e}function _(e){(function(){if(!p)throw new Error("Function called outside component initialization");return p})().$$.on_mount.push(e)}function b(){const e=p;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const c=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach(t=>{t.call(e,c)})}}}const k=[],y=Promise.resolve();let x=!1;const T=[],N=[],L=[];function j(e){N.push(e)}function w(){const e=new Set;do{for(;k.length;){const e=k.shift();$(e),M(e.$$)}for(;T.length;)T.shift()();for(;N.length;){const t=N.pop();e.has(t)||(t(),e.add(t))}}while(k.length);for(;L.length;)L.pop()();x=!1}function M(e){e.fragment&&(e.update(e.dirty),c(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(j))}let E;function R(){E={remaining:0,callbacks:[]}}function U(){E.remaining||c(E.callbacks)}function C(e){E.callbacks.push(e)}function S(e,n){const s=n.token={};function c(e,c,a,r){if(n.token!==s)return;n.resolved=a&&{[a]:r};const i=t(t({},n.ctx),n.resolved),o=e&&(n.current=e)(i);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==c&&e&&(R(),C(()=>{e.d(1),n.blocks[t]=null}),e.o(1),U())}):n.block.d(1),o.c(),o.i&&o.i(1),o.m(n.mount(),n.anchor),w()),n.block=o,n.blocks&&(n.blocks[c]=o)}if((a=e)&&"function"==typeof a.then){if(e.then(e=>{c(n.then,1,n.value,e)},e=>{c(n.catch,2,n.error,e)}),n.current!==n.pending)return c(n.pending,0),!0}else{if(n.current!==n.then)return c(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var a}function B(e,t){e.d(1),t.delete(e.key)}function O(e,t){C(()=>{B(e,t)}),e.o(1)}function A(e,t,n,s,c,a,r,i,o,l,u,v){let f=e.length,g=a.length,d=f;const h={};for(;d--;)h[e[d].key]=d;const m=[],p=new Map,$=new Map;for(d=g;d--;){const e=v(c,a,d),i=n(e);let o=r.get(i);o?s&&o.p(t,e):(o=l(i,e)).c(),p.set(i,m[d]=o),i in h&&$.set(i,Math.abs(d-h[i]))}const _=new Set,b=new Set;function k(e){e.i&&e.i(1),e.m(i,u),r.set(e.key,e),u=e.first,g--}for(;f&&g;){const t=m[g-1],n=e[f-1],s=t.key,c=n.key;t===n?(u=t.first,f--,g--):p.has(c)?!r.has(s)||_.has(s)?k(t):b.has(c)?f--:$.get(s)>$.get(c)?(b.add(s),k(t)):(_.add(c),f--):(o(n,r),f--)}for(;f--;){const t=e[f];p.has(t.key)||o(t,r)}for(;g;)k(m[g-1]);return m}function q(e,t,s){const{fragment:r,on_mount:i,on_destroy:o,after_render:l}=e.$$;r.m(t,s),j(()=>{const t=i.map(n).filter(a);o?o.push(...t):c(t),e.$$.on_mount=[]}),l.forEach(j)}function P(e,t){e.$$.dirty||(k.push(e),x||(x=!0,y.then(w)),e.$$.dirty=s()),e.$$.dirty[t]=!0}function z(t,n,a,r,i,o){const l=p;$(t);const u=n.props||{},v=t.$$={fragment:null,ctx:null,props:o,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(l?l.$$.context:[]),callbacks:s(),dirty:null};let f=!1;v.ctx=a?a(t,u,(e,n)=>{v.ctx&&i(v.ctx[e],v.ctx[e]=n)&&(v.bound[e]&&v.bound[e](n),f&&P(t,e))}):u,v.update(),f=!0,c(v.before_render),v.fragment=r(v.ctx),n.target&&(n.hydrate?v.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):v.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),q(t,n.target,n.anchor),w()),$(l)}class F{$destroy(){var t,n;n=!0,(t=this).$$&&(c(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function D(e,t,n){const s=Object.create(e);return s.tag=t[n],s}function G(e){var t,n,s,a,r;return{c(){t=u("label"),n=u("input"),s=f(),(a=u("span")).textContent="Все",e.$$binding_groups[0].push(n),d(n,"type","radio"),n.className="tag__radio svelte-vjkj6",n.__value="all",n.value=n.__value,a.className="tag__name",t.className="tag tag_name_all svelte-vjkj6",m(t,"active","all"===e.activeTag),r=[g(n,"change",e.input_change_handler),g(n,"change",e.handleChange)]},m(c,r){o(c,t,r),i(t,n),n.checked=n.__value===e.activeTag,i(t,s),i(t,a)},p(e,s){e.activeTag&&(n.checked=n.__value===s.activeTag),e.activeTag&&m(t,"active","all"===s.activeTag)},d(s){s&&l(t),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(n),1),c(r)}}}function H(e){var t;return{c(){(t=u("div")).textContent="Loading Tags...\n    ",t.className="tags__loading svelte-vjkj6"},m(e,n){o(e,t,n)},d(e){e&&l(t)}}}function I(e,t){var n,s,a,r,p,$,_,b,k=t.tag.label;return{key:e,first:null,c(){n=u("label"),s=u("input"),r=f(),p=u("span"),$=v(k),_=f(),t.$$binding_groups[0].push(s),d(s,"type","radio"),s.className="tag__radio svelte-vjkj6",s.__value=a=t.tag.value,s.value=s.__value,p.className="tag__name",n.className="tag svelte-vjkj6",m(n,"active",t.tag.value===t.activeTag),b=[g(s,"change",t.input_change_handler_1),g(s,"change",t.handleChange)],this.first=n},m(e,c){o(e,n,c),i(n,s),s.checked=s.__value===t.activeTag,i(n,r),i(n,p),i(p,$),i(n,_)},p(e,t){e.activeTag&&(s.checked=s.__value===t.activeTag),e.tags&&a!==(a=t.tag.value)&&(s.__value=a),s.value=s.__value,e.tags&&k!==(k=t.tag.label)&&h($,k),(e.tags||e.activeTag)&&m(n,"active",t.tag.value===t.activeTag)},d(e){e&&l(n),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(s),1),c(b)}}}function J(t){var n,s,c=[],a=new Map,r=t.tags.length>0&&G(t),v=t.tags;const g=e=>e.tag.value;for(var d=0;d<v.length;d+=1){let e=D(t,v,d),n=g(e);a.set(n,c[d]=I(n,e))}var h=null;return v.length||(h=H()).c(),{c(){for(n=u("div"),r&&r.c(),s=f(),d=0;d<c.length;d+=1)c[d].c();n.className="tags svelte-vjkj6"},m(e,t){for(o(e,n,t),r&&r.m(n,null),i(n,s),d=0;d<c.length;d+=1)c[d].m(n,null);h&&h.m(n,null)},p(e,t){t.tags.length>0?r?r.p(e,t):((r=G(t)).c(),r.m(n,s)):r&&(r.d(1),r=null);const i=t.tags;c=A(c,e,g,1,t,i,a,n,B,I,null,D),i.length?h&&(h.d(1),h=null):h||((h=H()).c(),h.m(n,null))},i:e,o:e,d(e){for(e&&l(n),r&&r.d(),d=0;d<c.length;d+=1)c[d].d();h&&h.d()}}}function K(e,t,n){let{tags:s=[]}=t,c="all";const a=b();return e.$set=e=>{"tags"in e&&n("tags",s=e.tags)},{tags:s,activeTag:c,handleChange:function(){a("change",{value:s.reduce((e,t)=>(e[t.value]=t.value===c,e),{})})},input_change_handler:function(){c=this.__value,n("activeTag",c)},input_change_handler_1:function(){c=this.__value,n("activeTag",c)},$$binding_groups:[[]]}}class Q extends F{constructor(e){super(),z(this,e,K,J,r,["tags"])}}function V(t){var n;return{c(){(n=u("span")).className="icon__empty svelte-a476nr"},m(e,t){o(e,n,t)},p:e,d(e){e&&l(n)}}}function W(e){var t;return{c(){(t=u("img")).className="icon__image",t.src=e.url,t.alt=""},m(e,n){o(e,t,n)},p(e,n){e.url&&(t.src=n.url)},d(e){e&&l(t)}}}function X(t){var n;return{c(){(n=u("span")).className="icon__loading svelte-a476nr"},m(e,t){o(e,n,t)},p:e,d(e){e&&l(n)}}}function Y(n){var s,c;let a={ctx:n,current:null,pending:X,then:W,catch:V,value:"null",error:"null"};return S(c=n.promise,a),{c(){s=u("div"),a.block.c(),s.className="icon"},m(e,t){o(e,s,t),a.block.m(s,a.anchor=null),a.mount=()=>s,a.anchor=null},p(e,s){n=s,a.ctx=n,c!==(c=n.promise)&&S(c,a)||a.block.p(e,t(t({},n),a.resolved))},i:e,o:e,d(e){e&&l(s),a.block.d(),a=null}}}function Z(e,t,n){let{className:s="",url:c}=t,a=(r=c,new Promise((e,t)=>{null!==r?fetch(r).then(n=>{n.ok?e():t()}).catch(()=>t()):t()}));var r;return e.$set=e=>{"className"in e&&n("className",s=e.className),"url"in e&&n("url",c=e.url)},{className:s,url:c,promise:a}}class ee extends F{constructor(e){super(),z(this,e,Z,Y,r,["className","url"])}}function te(e,t,n){const s=Object.create(e);return s.service=t[n],s}function ne(e){var t;return{c(){(t=u("div")).textContent="Loading Services...\n    ",t.className="services__loading svelte-1vvsxb1"},m(e,n){o(e,t,n)},d(e){e&&l(t)}}}function se(e,t){var n,s,c,a,r,g,d,m,p,$,_,b,k,y,x,T,N=t.service.name,L=t.service.desc,j=new ee({props:{class:"service__icon",url:t.service.icon}});return{key:e,first:null,c(){n=u("div"),s=u("a"),c=u("figure"),j.$$.fragment.c(),a=f(),r=u("h2"),g=v(N),d=f(),m=u("div"),p=v(L),_=f(),b=u("a"),k=v("Исходный код"),x=f(),c.className="service__icon-placeholder svelte-1vvsxb1",r.className="service__name svelte-1vvsxb1",m.className="service__description svelte-1vvsxb1",s.className="service__link svelte-1vvsxb1",s.href=$=t.service.href,b.className="service__source-link svelte-1vvsxb1",b.href=y=t.service.source,n.className="service svelte-1vvsxb1",this.first=n},m(e,t){o(e,n,t),i(n,s),i(s,c),q(j,c,null),i(s,a),i(s,r),i(r,g),i(s,d),i(s,m),i(m,p),i(n,_),i(n,b),i(b,k),i(n,x),T=!0},p(e,t){var n={};(e.filterServices||e.services)&&(n.url=t.service.icon),j.$set(n),T&&!e.services||N===(N=t.service.name)||h(g,N),T&&!e.services||L===(L=t.service.desc)||h(p,L),T&&!e.services||$===($=t.service.href)||(s.href=$),T&&!e.services||y===(y=t.service.source)||(b.href=y)},i(e){T||(j.$$.fragment.i(e),T=!0)},o(e){j.$$.fragment.o(e),T=!1},d(e){e&&l(n),j.$destroy()}}}function ce(e){var t,n,s=[],c=new Map,a=e.filterServices(e.services);const r=e=>e.service.id;for(var i=0;i<a.length;i+=1){let t=te(e,a,i),n=r(t);c.set(n,s[i]=se(n,t))}var v=null;return a.length||(v=ne()).c(),{c(){for(t=u("div"),i=0;i<s.length;i+=1)s[i].c();t.className="services svelte-1vvsxb1"},m(e,c){for(o(e,t,c),i=0;i<s.length;i+=1)s[i].m(t,null);v&&v.m(t,null),n=!0},p(e,n){const a=n.filterServices(n.services);R(),s=A(s,e,r,1,n,a,c,t,O,se,null,te),U(),a.length?v&&(v.d(1),v=null):v||((v=ne()).c(),v.m(t,null))},i(e){if(!n){for(var t=0;t<a.length;t+=1)s[t].i();n=!0}},o(e){for(i=0;i<s.length;i+=1)s[i].o();n=!1},d(e){for(e&&l(t),i=0;i<s.length;i+=1)s[i].d();v&&v.d()}}}function ae(e){return!e}function re(e,t,n){let{activeTagsMap:s,services:c=[]}=t;function a(e){return e.tags.some(e=>!0===s[e])}return e.$set=e=>{"activeTagsMap"in e&&n("activeTagsMap",s=e.activeTagsMap),"services"in e&&n("services",c=e.services)},{activeTagsMap:s,services:c,filterServices:function(e){return Object.values(s).every(ae)?e:e.filter(a)}}}class ie extends F{constructor(e){super(),z(this,e,re,ce,r,["activeTagsMap","services"])}}function oe(e){return e.map(e=>{const t=e.href.replace(/github\.io/,"com");return{...e,href:t,icon:e.icon?`${t}${e.icon}`:null}})}function le(e){return!0!==e.disabled}function ue(e){return e.filter(le)}function ve(e){return Object.entries(e).reduce((e,[t,n])=>(e.push({label:n,value:t}),e),[])}function fe(e){var t,n,s,c=new Q({props:{tags:e.tags}});c.$on("change",e.onChangeActiveTags);var a=new ie({props:{services:e.services,activeTagsMap:e.activeTagsMap}});return{c(){t=u("section"),c.$$.fragment.c(),n=f(),a.$$.fragment.c(),t.className="services-container"},m(e,r){o(e,t,r),q(c,t,null),i(t,n),q(a,t,null),s=!0},p(e,t){var n={};e.tags&&(n.tags=t.tags),c.$set(n);var s={};e.services&&(s.services=t.services),e.activeTagsMap&&(s.activeTagsMap=t.activeTagsMap),a.$set(s)},i(e){s||(c.$$.fragment.i(e),a.$$.fragment.i(e),s=!0)},o(e){c.$$.fragment.o(e),a.$$.fragment.o(e),s=!1},d(e){e&&l(t),c.$destroy(),a.$destroy()}}}function ge(e,t,n){let{servicesURL:s,tagsURL:c,servicesBlackList:a}=t,r=[],i=[];_(async()=>{const e=await function(e){return fetch(e).then(e=>e.json()).then(oe).then(ue)}(s);n("services",r=e.filter(e=>!a.includes(e.id)));const t=await function(e){return fetch(e).then(e=>e.json()).then(ve)}(c),o=function(e){const t=new Set;return e.forEach(e=>{e.tags.forEach(e=>{t.add(e)})}),t}(r);n("tags",i=t.filter(e=>o.has(e.value)))});let o={};return e.$set=e=>{"servicesURL"in e&&n("servicesURL",s=e.servicesURL),"tagsURL"in e&&n("tagsURL",c=e.tagsURL),"servicesBlackList"in e&&n("servicesBlackList",a=e.servicesBlackList)},{servicesURL:s,tagsURL:c,servicesBlackList:a,services:r,tags:i,activeTagsMap:o,onChangeActiveTags:function({detail:{value:e}}){n("activeTagsMap",o=e)}}}return new class extends F{constructor(e){super(),z(this,e,ge,fe,r,["servicesURL","tagsURL","servicesBlackList"])}}({target:document.querySelector("#services-app-container"),props:{servicesURL:"https://vovanr.com/services-json/dist/services.json",tagsURL:"https://vovanr.com/services-json/src/tags.json",servicesBlackList:["notes"]}})}();
//# sourceMappingURL=bundle.js.map

var app=function(){"use strict";function e(){}function t(e,t){for(const n in t)e[n]=t[n];return e}function n(e){return e()}function s(){return Object.create(null)}function a(e){e.forEach(n)}function c(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(e,t){e.appendChild(t)}function l(e,t,n){e.insertBefore(t,n||null)}function o(e){e.parentNode.removeChild(e)}function u(e){return document.createElement(e)}function v(e){return document.createTextNode(e)}function g(){return v(" ")}function f(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function d(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function h(e,t){t=""+t,e.data!==t&&(e.data=t)}function p(e,t,n){e.classList[n?"add":"remove"](t)}let m;function $(e){m=e}function _(e){(function(){if(!m)throw new Error("Function called outside component initialization");return m})().$$.on_mount.push(e)}function b(){const e=m;return(t,n)=>{const s=e.$$.callbacks[t];if(s){const a=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach(t=>{t.call(e,a)})}}}const y=[],k=Promise.resolve();let L=!1;const T=[],N=[],x=[];function w(e){N.push(e)}function R(){const e=new Set;do{for(;y.length;){const e=y.shift();$(e),U(e.$$)}for(;T.length;)T.shift()();for(;N.length;){const t=N.pop();e.has(t)||(t(),e.add(t))}}while(y.length);for(;x.length;)x.pop()();L=!1}function U(e){e.fragment&&(e.update(e.dirty),a(e.before_render),e.fragment.p(e.dirty,e.ctx),e.dirty=null,e.after_render.forEach(w))}let M;function E(){M={remaining:0,callbacks:[]}}function j(){M.remaining||a(M.callbacks)}function C(e){M.callbacks.push(e)}function S(e,n){const s=n.token={};function a(e,a,c,r){if(n.token!==s)return;n.resolved=c&&{[c]:r};const i=t(t({},n.ctx),n.resolved),l=e&&(n.current=e)(i);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==a&&e&&(E(),C(()=>{e.d(1),n.blocks[t]=null}),e.o(1),j())}):n.block.d(1),l.c(),l.i&&l.i(1),l.m(n.mount(),n.anchor),R()),n.block=l,n.blocks&&(n.blocks[a]=l)}if((c=e)&&"function"==typeof c.then){if(e.then(e=>{a(n.then,1,n.value,e)},e=>{a(n.catch,2,n.error,e)}),n.current!==n.pending)return a(n.pending,0),!0}else{if(n.current!==n.then)return a(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}var c}function B(e,t){e.d(1),t.delete(e.key)}function O(e,t){C(()=>{B(e,t)}),e.o(1)}function A(e,t,n,s,a,c,r,i,l,o,u,v){let g=e.length,f=c.length,d=g;const h={};for(;d--;)h[e[d].key]=d;const p=[],m=new Map,$=new Map;for(d=f;d--;){const e=v(a,c,d),i=n(e);let l=r.get(i);l?s&&l.p(t,e):(l=o(i,e)).c(),m.set(i,p[d]=l),i in h&&$.set(i,Math.abs(d-h[i]))}const _=new Set,b=new Set;function y(e){e.i&&e.i(1),e.m(i,u),r.set(e.key,e),u=e.first,f--}for(;g&&f;){const t=p[f-1],n=e[g-1],s=t.key,a=n.key;t===n?(u=t.first,g--,f--):m.has(a)?!r.has(s)||_.has(s)?y(t):b.has(a)?g--:$.get(s)>$.get(a)?(b.add(s),y(t)):(_.add(a),g--):(l(n,r),g--)}for(;g--;){const t=e[g];m.has(t.key)||l(t,r)}for(;f;)y(p[f-1]);return p}function q(e,t,s){const{fragment:r,on_mount:i,on_destroy:l,after_render:o}=e.$$;r.m(t,s),w(()=>{const t=i.map(n).filter(c);l?l.push(...t):a(t),e.$$.on_mount=[]}),o.forEach(w)}function P(e,t){e.$$.dirty||(y.push(e),L||(L=!0,k.then(R)),e.$$.dirty=s()),e.$$.dirty[t]=!0}function z(t,n,c,r,i,l){const o=m;$(t);const u=n.props||{},v=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:i,bound:s(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(o?o.$$.context:[]),callbacks:s(),dirty:null};let g=!1;v.ctx=c?c(t,u,(e,n)=>{v.ctx&&i(v.ctx[e],v.ctx[e]=n)&&(v.bound[e]&&v.bound[e](n),g&&P(t,e))}):u,v.update(),g=!0,a(v.before_render),v.fragment=r(v.ctx),n.target&&(n.hydrate?v.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):v.fragment.c(),n.intro&&t.$$.fragment.i&&t.$$.fragment.i(),q(t,n.target,n.anchor),R()),$(o)}class F{$destroy(){var t,n;n=!0,(t=this).$$&&(a(t.$$.on_destroy),t.$$.fragment.d(n),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={}),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function D(e,t,n){const s=Object.create(e);return s.tag=t[n],s}function G(e){var t,n,s,c,r;return{c(){t=u("label"),n=u("input"),s=g(),(c=u("span")).textContent="Все",e.$$binding_groups[0].push(n),d(n,"type","radio"),n.className="tag__radio svelte-1wu2aue",n.__value="all",n.value=n.__value,c.className="tag__name",t.className="tag tag_name_all svelte-1wu2aue",p(t,"active","all"===e.activeTag),r=[f(n,"change",e.input_change_handler),f(n,"change",e.handleChange)]},m(a,r){l(a,t,r),i(t,n),n.checked=n.__value===e.activeTag,i(t,s),i(t,c)},p(e,s){e.activeTag&&(n.checked=n.__value===s.activeTag),e.activeTag&&p(t,"active","all"===s.activeTag)},d(s){s&&o(t),e.$$binding_groups[0].splice(e.$$binding_groups[0].indexOf(n),1),a(r)}}}function H(e){var t;return{c(){(t=u("div")).textContent="Loading Tags...\n\t\t",t.className="tags__loading svelte-1wu2aue"},m(e,n){l(e,t,n)},d(e){e&&o(t)}}}function I(e,t){var n,s,c,r,m,$,_,b,y=t.tag.label;return{key:e,first:null,c(){n=u("label"),s=u("input"),r=g(),m=u("span"),$=v(y),_=g(),t.$$binding_groups[0].push(s),d(s,"type","radio"),s.className="tag__radio svelte-1wu2aue",s.__value=c=t.tag.value,s.value=s.__value,m.className="tag__name",n.className="tag svelte-1wu2aue",p(n,"active",t.tag.value===t.activeTag),b=[f(s,"change",t.input_change_handler_1),f(s,"change",t.handleChange)],this.first=n},m(e,a){l(e,n,a),i(n,s),s.checked=s.__value===t.activeTag,i(n,r),i(n,m),i(m,$),i(n,_)},p(e,t){e.activeTag&&(s.checked=s.__value===t.activeTag),e.tags&&c!==(c=t.tag.value)&&(s.__value=c),s.value=s.__value,e.tags&&y!==(y=t.tag.label)&&h($,y),(e.tags||e.activeTag)&&p(n,"active",t.tag.value===t.activeTag)},d(e){e&&o(n),t.$$binding_groups[0].splice(t.$$binding_groups[0].indexOf(s),1),a(b)}}}function J(t){var n,s,a=[],c=new Map,r=t.tags.length>0&&G(t),v=t.tags;const f=e=>e.tag.value;for(var d=0;d<v.length;d+=1){let e=D(t,v,d),n=f(e);c.set(n,a[d]=I(n,e))}var h=null;return v.length||(h=H()).c(),{c(){for(n=u("div"),r&&r.c(),s=g(),d=0;d<a.length;d+=1)a[d].c();n.className="tags svelte-1wu2aue"},m(e,t){for(l(e,n,t),r&&r.m(n,null),i(n,s),d=0;d<a.length;d+=1)a[d].m(n,null);h&&h.m(n,null)},p(e,t){t.tags.length>0?r?r.p(e,t):((r=G(t)).c(),r.m(n,s)):r&&(r.d(1),r=null);const i=t.tags;a=A(a,e,f,1,t,i,c,n,B,I,null,D),i.length?h&&(h.d(1),h=null):h||((h=H()).c(),h.m(n,null))},i:e,o:e,d(e){for(e&&o(n),r&&r.d(),d=0;d<a.length;d+=1)a[d].d();h&&h.d()}}}function K(e,t,n){let{tags:s=[]}=t,a="all";const c=b();return e.$set=e=>{"tags"in e&&n("tags",s=e.tags)},{tags:s,activeTag:a,handleChange:function(){c("change",{value:s.reduce((e,t)=>(e[t.value]=t.value===a,e),{})})},input_change_handler:function(){a=this.__value,n("activeTag",a)},input_change_handler_1:function(){a=this.__value,n("activeTag",a)},$$binding_groups:[[]]}}class Q extends F{constructor(e){super(),z(this,e,K,J,r,["tags"])}}function V(t){var n;return{c(){(n=u("span")).className="icon__empty svelte-lxgh1t"},m(e,t){l(e,n,t)},p:e,d(e){e&&o(n)}}}function W(e){var t;return{c(){(t=u("img")).className="icon__image svelte-lxgh1t",t.src=e.url,t.alt=""},m(e,n){l(e,t,n)},p(e,n){e.url&&(t.src=n.url)},d(e){e&&o(t)}}}function X(t){var n;return{c(){(n=u("span")).className="icon__loading svelte-lxgh1t"},m(e,t){l(e,n,t)},p:e,d(e){e&&o(n)}}}function Y(n){var s,a;let c={ctx:n,current:null,pending:X,then:W,catch:V,value:"null",error:"null"};return S(a=n.promise,c),{c(){s=u("div"),c.block.c(),s.className="icon svelte-lxgh1t"},m(e,t){l(e,s,t),c.block.m(s,c.anchor=null),c.mount=()=>s,c.anchor=null},p(e,s){n=s,c.ctx=n,a!==(a=n.promise)&&S(a,c)||c.block.p(e,t(t({},n),c.resolved))},i:e,o:e,d(e){e&&o(s),c.block.d(),c=null}}}function Z(e,t,n){let{className:s="",url:a}=t,c=(r=a,new Promise((e,t)=>{null!==r?fetch(r).then(n=>{n.ok?e():t()}).catch(()=>t()):t()}));var r;return e.$set=e=>{"className"in e&&n("className",s=e.className),"url"in e&&n("url",a=e.url)},{className:s,url:a,promise:c}}class ee extends F{constructor(e){super(),z(this,e,Z,Y,r,["className","url"])}}function te(e,t,n){const s=Object.create(e);return s.service=t[n],s}function ne(e){var t;return{c(){(t=u("div")).textContent="Loading Services...\n\t\t",t.className="services__loading svelte-1phfeyg"},m(e,n){l(e,t,n)},d(e){e&&o(t)}}}function se(e,t){var n,s,a,c,r,f,d,p,m,$,_,b,y,k,L,T,N=t.service.name,x=t.service.desc,w=new ee({props:{class:"service__icon",url:t.service.icon}});return{key:e,first:null,c(){n=u("div"),s=u("a"),a=u("figure"),w.$$.fragment.c(),c=g(),r=u("h2"),f=v(N),d=g(),p=u("div"),m=v(x),_=g(),b=u("a"),y=v("Исходный код"),L=g(),a.className="service__icon-placeholder svelte-1phfeyg",r.className="service__name svelte-1phfeyg",p.className="service__description svelte-1phfeyg",s.className="service__link svelte-1phfeyg",s.href=$=t.service.href,b.className="service__source-link svelte-1phfeyg",b.href=k=t.service.source,n.className="service svelte-1phfeyg",this.first=n},m(e,t){l(e,n,t),i(n,s),i(s,a),q(w,a,null),i(s,c),i(s,r),i(r,f),i(s,d),i(s,p),i(p,m),i(n,_),i(n,b),i(b,y),i(n,L),T=!0},p(e,t){var n={};(e.filterServices||e.services)&&(n.url=t.service.icon),w.$set(n),T&&!e.services||N===(N=t.service.name)||h(f,N),T&&!e.services||x===(x=t.service.desc)||h(m,x),T&&!e.services||$===($=t.service.href)||(s.href=$),T&&!e.services||k===(k=t.service.source)||(b.href=k)},i(e){T||(w.$$.fragment.i(e),T=!0)},o(e){w.$$.fragment.o(e),T=!1},d(e){e&&o(n),w.$destroy()}}}function ae(e){var t,n,s=[],a=new Map,c=e.filterServices(e.services);const r=e=>e.service.id;for(var i=0;i<c.length;i+=1){let t=te(e,c,i),n=r(t);a.set(n,s[i]=se(n,t))}var v=null;return c.length||(v=ne()).c(),{c(){for(t=u("div"),i=0;i<s.length;i+=1)s[i].c();t.className="services svelte-1phfeyg"},m(e,a){for(l(e,t,a),i=0;i<s.length;i+=1)s[i].m(t,null);v&&v.m(t,null),n=!0},p(e,n){const c=n.filterServices(n.services);E(),s=A(s,e,r,1,n,c,a,t,O,se,null,te),j(),c.length?v&&(v.d(1),v=null):v||((v=ne()).c(),v.m(t,null))},i(e){if(!n){for(var t=0;t<c.length;t+=1)s[t].i();n=!0}},o(e){for(i=0;i<s.length;i+=1)s[i].o();n=!1},d(e){for(e&&o(t),i=0;i<s.length;i+=1)s[i].d();v&&v.d()}}}function ce(e){return!e}function re(e,t,n){let{activeTagsMap:s,services:a=[]}=t;function c(e){return e.tags.some(e=>!0===s[e])}return e.$set=e=>{"activeTagsMap"in e&&n("activeTagsMap",s=e.activeTagsMap),"services"in e&&n("services",a=e.services)},{activeTagsMap:s,services:a,filterServices:function(e){return Object.values(s).every(ce)?e:e.filter(c)}}}class ie extends F{constructor(e){super(),z(this,e,re,ae,r,["activeTagsMap","services"])}}function le(e){return e.map(e=>{const t=e.href.replace(/github\.io/,"com");return{...e,href:t,icon:e.icon?`${t}${e.icon}`:null}})}function oe(e){return!0!==e.disabled}function ue(e){return e.filter(oe)}function ve(e){return Object.entries(e).reduce((e,[t,n])=>(e.push({label:n,value:t}),e),[])}function ge(e){var t,n,s,a=new Q({props:{tags:e.tags}});a.$on("change",e.onChangeActiveTags);var c=new ie({props:{services:e.services,activeTagsMap:e.activeTagsMap}});return{c(){t=u("section"),a.$$.fragment.c(),n=g(),c.$$.fragment.c(),t.className="services-container"},m(e,r){l(e,t,r),q(a,t,null),i(t,n),q(c,t,null),s=!0},p(e,t){var n={};e.tags&&(n.tags=t.tags),a.$set(n);var s={};e.services&&(s.services=t.services),e.activeTagsMap&&(s.activeTagsMap=t.activeTagsMap),c.$set(s)},i(e){s||(a.$$.fragment.i(e),c.$$.fragment.i(e),s=!0)},o(e){a.$$.fragment.o(e),c.$$.fragment.o(e),s=!1},d(e){e&&o(t),a.$destroy(),c.$destroy()}}}function fe(e,t,n){let{servicesURL:s,tagsURL:a,servicesBlackList:c}=t,r=[],i=[];_(async()=>{const e=await function(e){return fetch(e).then(e=>e.json()).then(le).then(ue)}(s);n("services",r=e.filter(e=>!c.includes(e.id)));const t=await function(e){return fetch(e).then(e=>e.json()).then(ve)}(a),l=function(e){const t=new Set;return e.forEach(e=>{e.tags.forEach(e=>{t.add(e)})}),t}(r);n("tags",i=t.filter(e=>l.has(e.value)))});let l={};let{name:o,siteURL:u}=t;return e.$set=e=>{"servicesURL"in e&&n("servicesURL",s=e.servicesURL),"tagsURL"in e&&n("tagsURL",a=e.tagsURL),"servicesBlackList"in e&&n("servicesBlackList",c=e.servicesBlackList),"name"in e&&n("name",o=e.name),"siteURL"in e&&n("siteURL",u=e.siteURL)},{servicesURL:s,tagsURL:a,servicesBlackList:c,services:r,tags:i,activeTagsMap:l,onChangeActiveTags:function({detail:{value:e}}){n("activeTagsMap",l=e)},name:o,siteURL:u}}return new class extends F{constructor(e){super(),z(this,e,fe,ge,r,["servicesURL","tagsURL","servicesBlackList","name","siteURL"])}}({target:document.querySelector("#services-app-container"),props:{servicesURL:"https://vovanr.com/services-json/dist/services.json",tagsURL:"https://vovanr.com/services-json/src/tags.json",servicesBlackList:["notes"]}})}();
//# sourceMappingURL=bundle.js.map
